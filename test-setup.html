<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a2e;
            color: white;
        }
        .test-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 4px solid #ff6b6b;
        }
        .test-item.success {
            border-left-color: #4caf50;
        }
        .test-item.error {
            border-left-color: #f44336;
        }
        .test-item.warning {
            border-left-color: #ff9800;
        }
        .button {
            display: inline-block;
            background: #ff6b6b;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>üîß AR Model Viewer - Setup Test</h1>
    
    <div id="test-results">
        <div class="test-item">
            <h3>‚è≥ Running tests...</h3>
            <p>Please wait while we check your setup...</p>
        </div>
    </div>
    
    <div style="margin-top: 30px;">
        <a href="index.html" class="button">üöÄ Launch AR App</a>
        <a href="demo.html" class="button">üéÆ Try Demo</a>
        <a href="marker-test.html" class="button">üéØ Test Marker</a>
    </div>

    <script>
        async function runTests() {
            const results = document.getElementById('test-results');
            results.innerHTML = '';
            
            const tests = [
                {
                    name: 'AR.js Library',
                    test: () => typeof AFRAME !== 'undefined',
                    success: 'AR.js loaded successfully',
                    error: 'AR.js failed to load'
                },
                {
                    name: 'Model Loader',
                    test: () => typeof window.modelLoader !== 'undefined',
                    success: 'Model loader available',
                    error: 'Model loader not found'
                },
                {
                    name: '3D Model File',
                    test: async () => {
                        try {
                            const response = await fetch('models/silly-ghost/ghost.glb', { method: 'HEAD' });
                            return response.ok;
                        } catch {
                            return false;
                        }
                    },
                    success: 'Ghost model file found',
                    error: 'Ghost model file not found'
                },
                {
                    name: 'AR Marker Image',
                    test: async () => {
                        try {
                            const response = await fetch('markers/marker1.png', { method: 'HEAD' });
                            return response.ok;
                        } catch {
                            return false;
                        }
                    },
                    success: 'AR marker image found',
                    error: 'AR marker image not found'
                },
                {
                    name: 'Sound File',
                    test: async () => {
                        try {
                            const response = await fetch('sounds/interaction.mp3', { method: 'HEAD' });
                            return response.ok;
                        } catch {
                            return false;
                        }
                    },
                    success: 'Sound file found',
                    error: 'Sound file not found'
                },
                {
                    name: 'Model Configuration',
                    test: async () => {
                        try {
                            const response = await fetch('models/model-config.json');
                            const config = await response.json();
                            return config.models && config.models.length > 0;
                        } catch {
                            return false;
                        }
                    },
                    success: 'Model configuration valid',
                    error: 'Model configuration invalid'
                }
            ];
            
            for (const test of tests) {
                const testDiv = document.createElement('div');
                testDiv.className = 'test-item';
                
                try {
                    const result = await test.test();
                    testDiv.className += result ? ' success' : ' error';
                    testDiv.innerHTML = `
                        <h3>${result ? '‚úÖ' : '‚ùå'} ${test.name}</h3>
                        <p>${result ? test.success : test.error}</p>
                    `;
                } catch (error) {
                    testDiv.className += ' error';
                    testDiv.innerHTML = `
                        <h3>‚ùå ${test.name}</h3>
                        <p>Error: ${error.message}</p>
                    `;
                }
                
                results.appendChild(testDiv);
            }
            
            // Add summary
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'test-item';
            summaryDiv.innerHTML = `
                <h3>üìä Test Summary</h3>
                <p>All tests completed. Check the results above to ensure everything is working correctly.</p>
                <p><strong>Next steps:</strong></p>
                <ul>
                    <li>If all tests pass, try the AR app</li>
                    <li>If any tests fail, check the file paths and names</li>
                    <li>For mobile testing, deploy to Netlify</li>
                </ul>
            `;
            results.appendChild(summaryDiv);
        }
        
        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>
